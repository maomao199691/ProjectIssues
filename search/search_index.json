{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Maomao's Website \u4e2a\u4eba\u5e73\u65f6\u8bb0\u5f55\u7684\u4e00\u4e9b\u95ee\u9898 \u5927\u6570\u636e\u7ec4\u4ef6\u95ee\u9898 Hive Hadoop Spark Zookeeper Flume Superset bug\u8bb0\u5f55 \u9047\u5230\u7684bug \u6709\u95ee\u9898\u8bf7\u7559\u8a00","title":"Welcome to Maomao's Website"},{"location":"#welcome-to-maomaos-website","text":"\u4e2a\u4eba\u5e73\u65f6\u8bb0\u5f55\u7684\u4e00\u4e9b\u95ee\u9898","title":"Welcome to Maomao's Website"},{"location":"#_1","text":"Hive Hadoop Spark Zookeeper Flume Superset","title":"\u5927\u6570\u636e\u7ec4\u4ef6\u95ee\u9898"},{"location":"#bug","text":"\u9047\u5230\u7684bug","title":"bug\u8bb0\u5f55"},{"location":"#_2","text":"","title":"\u6709\u95ee\u9898\u8bf7\u7559\u8a00"},{"location":"%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98/Java%E9%97%AE%E9%A2%98/","text":"Java16\u7ea7\u4ee5\u4e0a\u7248\u672c\u65e0jre \u53ef\u4ee5\u7531\u4ee5\u4e0b\u547d\u4ee4\u4ecebin\u4e2d\u63d0\u53d6\u51fa\u6765 bin\\jlink.exe --module-path jmods --add-modules java.desktop --output jre","title":"Java\u95ee\u9898"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/","text":"Elasticsearch\u8bed\u6cd5\u5927\u5168 \u57fa\u4e8ekibana\u64cd\u4f5cElasticsearch \u4e00\u3001ElasticSearch\u521b\u5efaindex\u3001type\u3001field 1\u3001ElasticSearch \u548c \u5173\u7cfb\u578b\u6570\u636e\u5e93\u6570\u636e\u6a21\u578b\u5bf9\u5e94\u5173\u7cfb\u8868 Relational DB => Database => Tables => Rows => Columns Elasitcsearch => Indices => Types => Documents => Fields 2\u3001\u521b\u5efa\u7d22\u5f15\u5e76\u67e5\u770b PUT /decode GET /_cat/indices?v 3\u3001\u5220\u9664\u7d22\u5f15\u5e76\u67e5\u770b DELETE /decode GET /_cat/indices?v 4\u3001\u6587\u6863\u64cd\u4f5c 4.1\u3001\u67e5\u770b\u6587\u6863\u7c7b\u578b GET /decode/resolve/_mapping 4.2\u3001\u5728\u7d22\u5f15\u4e2d\u6dfb\u52a0\u6587\u6863 PUT /decode/resolve/1 { \"vin\":\"B123456789\" } 4.3\u3001\u5728\u7d22\u5f15\u4e2d\u67e5\u770b\u6587\u6863 POST /decode/resolve/1/ 4.4\u3001\u5728\u7d22\u5f15\u4e2d\u4fee\u6539\u6587\u6863 POST /decode/resolve/1/_update { \"doc\":{\"vin\":\"A12345555678\"} } 4.5\u3001\u5728\u7d22\u5f15\u4e2d\u5220\u9664\u6587\u6863 DELETE /decode/resolve/1 4.6\u3001\u5728\u7d22\u5f15\u4e2d\u6279\u91cf\u64cd\u4f5c\u6587\u6863 POST /decode/resolve/_bulk {\"index\":{\"_id\":\"1\"}} {\"vin\": \"D1445266366\" } {\"index\":{\"_id\":\"2\"}} {\"vin\": \"C4526365588\" } 5\u3001\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6a21\u578b\u6837\u4f8b\uff08\u5305\u542bindex\u3001type\u3001field\uff09 PUT /decode { \"settings\":{ \"index\":{ \"number_of_shards\":3, \"number_of_replicas\":0 } }, \"mappings\":{ \"resolve\":{ \"properties\":{ \"id\":{ \"type\":\"keyword\" }, \"vin\":{ \"type\":\"keyword\" }, \"gender\":{ \"type\":\"keyword\" }, \"carBrandId\":{ \"type\":\"text\" }, \"balance\":{ \"type\":\"int\" }, \"age\":{ \"type\":\"int\" }, \"address\":{ \"type\":\"keyword\" }, \"craeteTime\":{ \"type\":\"date\" }, \"statusId\":{ \"type\":\"keyword\" }, \"enable\":{ \"type\":\"boolean\" } } } } } 6\u3001ElaticSearch\u7ed9type\u589e\u52a0\u4e00\u9879field PUT decode/_mapping/resolve { \"properties\": { \"fieldName\":{ \"type\":\"boolean\" } } } \u4e8c\u3001ElasticSearch\u641c\u7d22\u8bed\u53e5 1\u3001\u6700\u7b80\u5355\u7684\u641c\u7d22\uff0c\u4f7f\u7528match_all\u6765\u8868\u793a\uff0c\u8868\u793a\u641c\u7d22\u5168\u90e8 GET /decode/resolve/_serach { \"query\":\"{\"match_all\":{}} } 2\u3001\u5206\u9875\u641c\u7d22\uff0cfrom\u8868\u793a\u504f\u79fb\u91cf\uff0c\u4ece0\u6765\u65f6\uff0csize\u8868\u793a\u6bcf\u9875\u663e\u793a\u7684\u6570\u91cf GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"from\":0, \"size\":10 } 3\u3001\u641c\u7d22\u6392\u5e8f\uff0c\u4f7f\u7528sort\u8868\u793a\uff0c\u4f8b\u5982cdate\u5b57\u6bb5\u964d\u5e8f\u6392\u5217 GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"sort\":{\"cdate\":{\"order\":\"desc\"}} } 4\u3001\u641c\u7d22\u5e76\u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u5185\u5bb9\uff0c\u4f7f\u7528_source\u8868\u793a\uff0c\u4f8b\u5982\u53ea\u8fd4\u56desource\u548ctitle\u4e24\u4e2a\u5b57\u6bb5\u5185\u5bb9 GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"_source\":[\"source\",\"title\"] } 5\u3001\u6761\u4ef6\u641c\u7d22\uff0c\u4f7f\u7528match\u8868\u793a\u5339\u914d\u6761\u4ef6\uff0c\u4f8b\u5982\u641c\u7d22\u51faid\u4e3a20\u7684\u6587\u6863 GET /decode/resolve/_seatch { \"query\":{ \"match\":{ \"id\":20 } } } 6\u3001\u6587\u672c\u7c7b\u578b\u5b57\u6bb5\u7684\u6761\u4ef6\u641c\u7d22\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u5305\u542b\"mill\"\u7684\u6587\u6863\uff0c\u5bf9\u6bd4\u4e0a\u4e00\u6761\u641c\u7d22\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6570\u503c\u7c7b\u578bmatch\u64cd\u4f5c\u4f7f\u7528\u7684\u662f\u7cbe\u786e\u5339\u914d\uff0c\u5bf9\u4e8e\u6587\u672c\u7c7b\u578b\u4f7f\u7528\u7684\u662f\u6a21\u7cca\u5339\u914d GET /decode/resolve/_search { \"query\":{ \"match\":{ \"adress\":\"mill\" } }, \"_source\":[\"id\",\"address\"] } 7\u3001\u77ed\u8bed\u5339\u914d\u641c\u7d22\uff0c\u4f7f\u7528match_phrase\u8868\u793a\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u540c\u65f6\u5305\u542bmill\u548clane\u7684\u6587\u6863 GET /decode/resolve/_search { \"query\":{ \"match_phrase\":{ \"address\":\"mill lane\" } } } 8\u3001\u7ec4\u5408\u641c\u7d22\uff0c\u4f7f\u7528bool\u6765\u8fdb\u884c\u7ec4\u5408\uff0cmust\u8868\u793a\u540c\u65f6\u6ee1\u8db3\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u540c\u65f6\u5305\u542bmill\u548clane\u7684\u6587\u6863 GET /dedoce/resolve/_search { \"query\":{ \"bool\":{ \"must\":[ {\"match\":{\"address\":\"mill\"}}, {\"match\":{\"address\":\"lane}} ] } } } 9\u3001\u7ec4\u5408\u641c\u7d22\uff0cshould\u8868\u793a\u6ee1\u8db3\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\uff0c\u641c\u7d22address\u5b57\u6bb5\u4e2d\u5305\u542bmill\u6216\u8005lane\u7684\u6587\u6863 GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"should\":[ {\"match\":{\"address\":\"mill}}, {\"match\":{\"address\":\"lane}} ] } } } 10\u3001\u7ec4\u5408\u641c\u7d22\uff0cmust_not\u8868\u793a\u540c\u65f6\u4e0d\u6ee1\u8db3\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u4e0d\u5305\u542bmill\u4e14\u4e0d\u5305\u542blane\u7684\u6587\u6863 GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must_not\":[ {\"match\":{\"address\":\"mill}}, {\"match\":{\"address\":\"lane}} ] } } } 11\u3001\u7ec4\u5408\u641c\u7d22\uff0c\u7ec4\u5408must\u548cmust_not\uff0c\u4f8b\u5982\u641c\u7d22age\u5b57\u6bb5\u7b49\u4e8e40\u4e14state\u5b57\u6bb5\u4e0d\u5305\u542bID\u7684\u6587\u6863 GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must\":[ {\"match\":{\"age\":\"40}} ], \"must_not\":[ {\"match\":{\"state\":\"ID\"}} ] } } } 12\u3001\u641c\u7d22\u8fc7\u6ee4\uff0c\u4f7f\u7528filter\u6765\u8868\u793a\uff0c\u4f8b\u5982\u8fc7\u6ee4\u51fabalance\u5b57\u6bb5\u572820000~30000\u7684\u6587\u6863 GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must\":{ \"match_all\":{} }, \"filter\":{ \"ranger\":{ \"balance\":{ \"gte\":20000, \"lte\":30000 } } } } } } 13\u3001\u5bf9\u641c\u7d22\u7ed3\u679c\u8fdb\u884c\u805a\u5408\uff0c\u4f7f\u7528aggs\u6765\u8868\u793a\uff0c\u7c7b\u4f3c\u4e8eMySQL\u4e2dgroup by,\u4f8b\u5982\u5bf9vin\u5b57\u6bb5\u8fdb\u884c\u805a\u5408\uff0c\u7edf\u8ba1\u51fa\u76f8\u540cstate\u7684\u6587\u6863\u6570\u91cf GET /decode/resolve/_search { \"size\":0, \"aggs\":{ \"group_by_vin\":{ \"terms\":{ \"field\":\"vin\" } } } } 14\u3001\u5d4c\u5957\u805a\u5408\uff0c\u4f8b\u5982\u5bf9state\u5b57\u6bb5\u8fdb\u884c\u805a\u5408\uff0c\u7edf\u8ba1\u51fa\u76f8\u540cvin\u7684\u6587\u6863\u6570\u91cf\uff0c\u518d\u7edf\u8ba1\u51fabalance\u7684\u5e73\u5747\u503c GET /decode/resolve/_search { \"size\":0, \"aggs\"{ \"group_by_vin\":{ \"terms\":{ \"field\":\"vin\" }, \"aggs\":{ \"average_balance\":{ \"avg\":{ \"field\":\"balance\" } } } } } }","title":"ElasticSearch\u8bed\u6cd5"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#elasticsearch","text":"\u57fa\u4e8ekibana\u64cd\u4f5cElasticsearch","title":"Elasticsearch\u8bed\u6cd5\u5927\u5168"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#elasticsearchindextypefield","text":"","title":"\u4e00\u3001ElasticSearch\u521b\u5efaindex\u3001type\u3001field"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#1elasticsearch","text":"Relational DB => Database => Tables => Rows => Columns Elasitcsearch => Indices => Types => Documents => Fields","title":"1\u3001ElasticSearch \u548c \u5173\u7cfb\u578b\u6570\u636e\u5e93\u6570\u636e\u6a21\u578b\u5bf9\u5e94\u5173\u7cfb\u8868"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#2","text":"PUT /decode GET /_cat/indices?v","title":"2\u3001\u521b\u5efa\u7d22\u5f15\u5e76\u67e5\u770b"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#3","text":"DELETE /decode GET /_cat/indices?v","title":"3\u3001\u5220\u9664\u7d22\u5f15\u5e76\u67e5\u770b"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#4","text":"","title":"4\u3001\u6587\u6863\u64cd\u4f5c"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#41","text":"GET /decode/resolve/_mapping","title":"4.1\u3001\u67e5\u770b\u6587\u6863\u7c7b\u578b"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#42","text":"PUT /decode/resolve/1 { \"vin\":\"B123456789\" }","title":"4.2\u3001\u5728\u7d22\u5f15\u4e2d\u6dfb\u52a0\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#43","text":"POST /decode/resolve/1/","title":"4.3\u3001\u5728\u7d22\u5f15\u4e2d\u67e5\u770b\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#44","text":"POST /decode/resolve/1/_update { \"doc\":{\"vin\":\"A12345555678\"} }","title":"4.4\u3001\u5728\u7d22\u5f15\u4e2d\u4fee\u6539\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#45","text":"DELETE /decode/resolve/1","title":"4.5\u3001\u5728\u7d22\u5f15\u4e2d\u5220\u9664\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#46","text":"POST /decode/resolve/_bulk {\"index\":{\"_id\":\"1\"}} {\"vin\": \"D1445266366\" } {\"index\":{\"_id\":\"2\"}} {\"vin\": \"C4526365588\" }","title":"4.6\u3001\u5728\u7d22\u5f15\u4e2d\u6279\u91cf\u64cd\u4f5c\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#5indextypefield","text":"PUT /decode { \"settings\":{ \"index\":{ \"number_of_shards\":3, \"number_of_replicas\":0 } }, \"mappings\":{ \"resolve\":{ \"properties\":{ \"id\":{ \"type\":\"keyword\" }, \"vin\":{ \"type\":\"keyword\" }, \"gender\":{ \"type\":\"keyword\" }, \"carBrandId\":{ \"type\":\"text\" }, \"balance\":{ \"type\":\"int\" }, \"age\":{ \"type\":\"int\" }, \"address\":{ \"type\":\"keyword\" }, \"craeteTime\":{ \"type\":\"date\" }, \"statusId\":{ \"type\":\"keyword\" }, \"enable\":{ \"type\":\"boolean\" } } } } }","title":"5\u3001\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6a21\u578b\u6837\u4f8b\uff08\u5305\u542bindex\u3001type\u3001field\uff09"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#6elaticsearchtypefield","text":"PUT decode/_mapping/resolve { \"properties\": { \"fieldName\":{ \"type\":\"boolean\" } } }","title":"6\u3001ElaticSearch\u7ed9type\u589e\u52a0\u4e00\u9879field"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#elasticsearch_1","text":"","title":"\u4e8c\u3001ElasticSearch\u641c\u7d22\u8bed\u53e5"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#1match_all","text":"GET /decode/resolve/_serach { \"query\":\"{\"match_all\":{}} }","title":"1\u3001\u6700\u7b80\u5355\u7684\u641c\u7d22\uff0c\u4f7f\u7528match_all\u6765\u8868\u793a\uff0c\u8868\u793a\u641c\u7d22\u5168\u90e8"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#2from0size","text":"GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"from\":0, \"size\":10 }","title":"2\u3001\u5206\u9875\u641c\u7d22\uff0cfrom\u8868\u793a\u504f\u79fb\u91cf\uff0c\u4ece0\u6765\u65f6\uff0csize\u8868\u793a\u6bcf\u9875\u663e\u793a\u7684\u6570\u91cf"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#3sortcdate","text":"GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"sort\":{\"cdate\":{\"order\":\"desc\"}} }","title":"3\u3001\u641c\u7d22\u6392\u5e8f\uff0c\u4f7f\u7528sort\u8868\u793a\uff0c\u4f8b\u5982cdate\u5b57\u6bb5\u964d\u5e8f\u6392\u5217"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#4_sourcesourcetitle","text":"GET /decode/resolve/_search { \"query\":{\"match_all\":{}}, \"_source\":[\"source\",\"title\"] }","title":"4\u3001\u641c\u7d22\u5e76\u8fd4\u56de\u6307\u5b9a\u5b57\u6bb5\u5185\u5bb9\uff0c\u4f7f\u7528_source\u8868\u793a\uff0c\u4f8b\u5982\u53ea\u8fd4\u56desource\u548ctitle\u4e24\u4e2a\u5b57\u6bb5\u5185\u5bb9"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#5matchid20","text":"GET /decode/resolve/_seatch { \"query\":{ \"match\":{ \"id\":20 } } }","title":"5\u3001\u6761\u4ef6\u641c\u7d22\uff0c\u4f7f\u7528match\u8868\u793a\u5339\u914d\u6761\u4ef6\uff0c\u4f8b\u5982\u641c\u7d22\u51faid\u4e3a20\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#6addressmillmatch","text":"GET /decode/resolve/_search { \"query\":{ \"match\":{ \"adress\":\"mill\" } }, \"_source\":[\"id\",\"address\"] }","title":"6\u3001\u6587\u672c\u7c7b\u578b\u5b57\u6bb5\u7684\u6761\u4ef6\u641c\u7d22\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u5305\u542b\"mill\"\u7684\u6587\u6863\uff0c\u5bf9\u6bd4\u4e0a\u4e00\u6761\u641c\u7d22\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6570\u503c\u7c7b\u578bmatch\u64cd\u4f5c\u4f7f\u7528\u7684\u662f\u7cbe\u786e\u5339\u914d\uff0c\u5bf9\u4e8e\u6587\u672c\u7c7b\u578b\u4f7f\u7528\u7684\u662f\u6a21\u7cca\u5339\u914d"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#7match_phraseaddressmilllane","text":"GET /decode/resolve/_search { \"query\":{ \"match_phrase\":{ \"address\":\"mill lane\" } } }","title":"7\u3001\u77ed\u8bed\u5339\u914d\u641c\u7d22\uff0c\u4f7f\u7528match_phrase\u8868\u793a\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u540c\u65f6\u5305\u542bmill\u548clane\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#8boolmustaddressmilllane","text":"GET /dedoce/resolve/_search { \"query\":{ \"bool\":{ \"must\":[ {\"match\":{\"address\":\"mill\"}}, {\"match\":{\"address\":\"lane}} ] } } }","title":"8\u3001\u7ec4\u5408\u641c\u7d22\uff0c\u4f7f\u7528bool\u6765\u8fdb\u884c\u7ec4\u5408\uff0cmust\u8868\u793a\u540c\u65f6\u6ee1\u8db3\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u540c\u65f6\u5305\u542bmill\u548clane\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#9shouldaddressmilllane","text":"GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"should\":[ {\"match\":{\"address\":\"mill}}, {\"match\":{\"address\":\"lane}} ] } } }","title":"9\u3001\u7ec4\u5408\u641c\u7d22\uff0cshould\u8868\u793a\u6ee1\u8db3\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\uff0c\u641c\u7d22address\u5b57\u6bb5\u4e2d\u5305\u542bmill\u6216\u8005lane\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#10must_notaddressmilllane","text":"GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must_not\":[ {\"match\":{\"address\":\"mill}}, {\"match\":{\"address\":\"lane}} ] } } }","title":"10\u3001\u7ec4\u5408\u641c\u7d22\uff0cmust_not\u8868\u793a\u540c\u65f6\u4e0d\u6ee1\u8db3\uff0c\u4f8b\u5982\u641c\u7d22address\u5b57\u6bb5\u4e2d\u4e0d\u5305\u542bmill\u4e14\u4e0d\u5305\u542blane\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#11mustmust_notage40stateid","text":"GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must\":[ {\"match\":{\"age\":\"40}} ], \"must_not\":[ {\"match\":{\"state\":\"ID\"}} ] } } }","title":"11\u3001\u7ec4\u5408\u641c\u7d22\uff0c\u7ec4\u5408must\u548cmust_not\uff0c\u4f8b\u5982\u641c\u7d22age\u5b57\u6bb5\u7b49\u4e8e40\u4e14state\u5b57\u6bb5\u4e0d\u5305\u542bID\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#12filterbalance2000030000","text":"GET /decode/resolve/_search { \"query\":{ \"bool\":{ \"must\":{ \"match_all\":{} }, \"filter\":{ \"ranger\":{ \"balance\":{ \"gte\":20000, \"lte\":30000 } } } } } }","title":"12\u3001\u641c\u7d22\u8fc7\u6ee4\uff0c\u4f7f\u7528filter\u6765\u8868\u793a\uff0c\u4f8b\u5982\u8fc7\u6ee4\u51fabalance\u5b57\u6bb5\u572820000~30000\u7684\u6587\u6863"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#13aggsmysqlgroup-byvinstate","text":"GET /decode/resolve/_search { \"size\":0, \"aggs\":{ \"group_by_vin\":{ \"terms\":{ \"field\":\"vin\" } } } }","title":"13\u3001\u5bf9\u641c\u7d22\u7ed3\u679c\u8fdb\u884c\u805a\u5408\uff0c\u4f7f\u7528aggs\u6765\u8868\u793a\uff0c\u7c7b\u4f3c\u4e8eMySQL\u4e2dgroup by,\u4f8b\u5982\u5bf9vin\u5b57\u6bb5\u8fdb\u884c\u805a\u5408\uff0c\u7edf\u8ba1\u51fa\u76f8\u540cstate\u7684\u6587\u6863\u6570\u91cf"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/ElastiSearch%E8%AF%AD%E6%B3%95/#14statevinbalance","text":"GET /decode/resolve/_search { \"size\":0, \"aggs\"{ \"group_by_vin\":{ \"terms\":{ \"field\":\"vin\" }, \"aggs\":{ \"average_balance\":{ \"avg\":{ \"field\":\"balance\" } } } } } }","title":"14\u3001\u5d4c\u5957\u805a\u5408\uff0c\u4f8b\u5982\u5bf9state\u5b57\u6bb5\u8fdb\u884c\u805a\u5408\uff0c\u7edf\u8ba1\u51fa\u76f8\u540cvin\u7684\u6587\u6863\u6570\u91cf\uff0c\u518d\u7edf\u8ba1\u51fabalance\u7684\u5e73\u5747\u503c"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/Rabbitmq/","text":"Rabbitmq \u6982\u8ff0 \u57fa\u672c\u8bed\u6cd5 \u4f7f\u7528 docker \u5b89\u88c5 Rabbitmq \u521b\u5efa\u5e76\u8fd0\u884c RabbitMQ \u5bb9\u5668: docker run -d -p 15672:15672 -p 5672:5672 \\ -e RABBITMQ_DEFAULT_VHOST=my_vhost \\ -e RABBITMQ_DEFAULT_USER=admin \\ -e RABBITMQ_DEFAULT_PASS=admin \\ --hostname myRabbit \\ --name rabbitmq \\ rabbitmq \u53c2\u6570\u8bf4\u660e\uff1a -d:\u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c\u5bb9\u5668; -p:\u5c06\u5bb9\u5668\u7684\u7aef\u53e3 5672(\u5e94\u7528\u8bbf\u95ee\u7aef\u53e3) \u548c 15672 (\u63a7\u5236\u53f0Web\u7aef\u53e3\u53f7) \u6620\u5c04\u5230\u4e3b\u673a\u4e2d; -e:\u6307\u5b9a\u73af\u5883\u53d8\u91cf\uff1a RABBITMQ_DEFAULT_VHOST \uff1a\u9ed8\u8ba4\u865a\u62df\u673a\u540d\uff1b RABBITMQ_DEFAULT_USER \uff1a\u9ed8\u8ba4\u7684\u7528\u6237\u540d\uff1b RABBITMQ_DEFAULT_PASS \uff1a\u9ed8\u8ba4\u7684\u7528\u6237\u5bc6\u7801\uff1b --hostname: \u6307\u5b9a\u4e3b\u673a\u540d(RabbitMQ \u7684\u4e00\u4e2a\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\u662f\u5b83\u6839\u636e\u6240\u8c13\u7684 \u8282\u70b9\u540d\u79f0 \u5b58\u50a8\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a\u4e3b\u673a\u540d); --name rabbitmq: \u8bbe\u7f6e\u5bb9\u5668\u540d\u79f0; rabbigmq\uff1a\u5bb9\u5668\u4f7f\u7528\u7684\u666f\u8c61\u540d\u79f0; \u67e5\u770b\u542f\u52a8\u60c5\u51b5\uff1a docker ps -l ------------ CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72072ace59f0 rabbitmq \"docker-entrypoint.s\u2026\" 12 seconds ago Up 9 seconds 4369/tcp, 0.0.0.0:5672->5672/tcp, :::5672->5672/tcp, 5671/tcp, 15691-15692/tcp, 25672/tcp, 0.0.0.0:15672->15672/tcp, :::15672->15672/tcp rabbitmq \u8bbe\u7f6e docker \u542f\u52a8\u7684\u65f6\u5019\u81ea\u52a8\u542f\u52a8: docker update rabbitmq --restart=always \u542f\u52a8 rabbitmq_management\uff1a \u65b9\u5f0f\u4e00\uff1a docker exec -it rabbitmq /bin/bash --------------------------------- user@7b295c46c99d /: rabbitmq-plugins enable rabbitmq_management \u65b9\u5f0f\u4e8c\uff1a docker exec -it rabbitmq rabbitmq-plugins enable rabbitmq_management","title":"Rabbitmq"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/Rabbitmq/#rabbitmq","text":"","title":"Rabbitmq \u6982\u8ff0"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/Rabbitmq/#_1","text":"\u4f7f\u7528 docker \u5b89\u88c5 Rabbitmq \u521b\u5efa\u5e76\u8fd0\u884c RabbitMQ \u5bb9\u5668: docker run -d -p 15672:15672 -p 5672:5672 \\ -e RABBITMQ_DEFAULT_VHOST=my_vhost \\ -e RABBITMQ_DEFAULT_USER=admin \\ -e RABBITMQ_DEFAULT_PASS=admin \\ --hostname myRabbit \\ --name rabbitmq \\ rabbitmq \u53c2\u6570\u8bf4\u660e\uff1a -d:\u8868\u793a\u5728\u540e\u53f0\u8fd0\u884c\u5bb9\u5668; -p:\u5c06\u5bb9\u5668\u7684\u7aef\u53e3 5672(\u5e94\u7528\u8bbf\u95ee\u7aef\u53e3) \u548c 15672 (\u63a7\u5236\u53f0Web\u7aef\u53e3\u53f7) \u6620\u5c04\u5230\u4e3b\u673a\u4e2d; -e:\u6307\u5b9a\u73af\u5883\u53d8\u91cf\uff1a RABBITMQ_DEFAULT_VHOST \uff1a\u9ed8\u8ba4\u865a\u62df\u673a\u540d\uff1b RABBITMQ_DEFAULT_USER \uff1a\u9ed8\u8ba4\u7684\u7528\u6237\u540d\uff1b RABBITMQ_DEFAULT_PASS \uff1a\u9ed8\u8ba4\u7684\u7528\u6237\u5bc6\u7801\uff1b --hostname: \u6307\u5b9a\u4e3b\u673a\u540d(RabbitMQ \u7684\u4e00\u4e2a\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\u662f\u5b83\u6839\u636e\u6240\u8c13\u7684 \u8282\u70b9\u540d\u79f0 \u5b58\u50a8\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a\u4e3b\u673a\u540d); --name rabbitmq: \u8bbe\u7f6e\u5bb9\u5668\u540d\u79f0; rabbigmq\uff1a\u5bb9\u5668\u4f7f\u7528\u7684\u666f\u8c61\u540d\u79f0; \u67e5\u770b\u542f\u52a8\u60c5\u51b5\uff1a docker ps -l ------------ CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 72072ace59f0 rabbitmq \"docker-entrypoint.s\u2026\" 12 seconds ago Up 9 seconds 4369/tcp, 0.0.0.0:5672->5672/tcp, :::5672->5672/tcp, 5671/tcp, 15691-15692/tcp, 25672/tcp, 0.0.0.0:15672->15672/tcp, :::15672->15672/tcp rabbitmq \u8bbe\u7f6e docker \u542f\u52a8\u7684\u65f6\u5019\u81ea\u52a8\u542f\u52a8: docker update rabbitmq --restart=always \u542f\u52a8 rabbitmq_management\uff1a \u65b9\u5f0f\u4e00\uff1a docker exec -it rabbitmq /bin/bash --------------------------------- user@7b295c46c99d /: rabbitmq-plugins enable rabbitmq_management \u65b9\u5f0f\u4e8c\uff1a docker exec -it rabbitmq rabbitmq-plugins enable rabbitmq_management","title":"\u57fa\u672c\u8bed\u6cd5"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/Superset/","text":"Superset\u57fa\u672c\u547d\u4ee4 \u6fc0\u6d3b/\u53d6\u6d88\u6fc0\u6d3b superset : conda activate/deactivate superset superset\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e: ./envs/superset/lib/python3.7/site-packages/superset/config.py \u542f\u52a8superset: gunicorn --workers 5 --timeout 120 --bind hadoop4:8787 \"superset.app:create_app()\" --daemon \u505c\u6b62superset: ps -ef | awk '/superset/ && !/awk/{print $2}' | xargs kill -9 \u5b89\u88c5mysql\u6570\u636e\u6e90: conda install mysqlclient","title":"Superset"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/Superset/#superset","text":"\u6fc0\u6d3b/\u53d6\u6d88\u6fc0\u6d3b superset : conda activate/deactivate superset superset\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e: ./envs/superset/lib/python3.7/site-packages/superset/config.py \u542f\u52a8superset: gunicorn --workers 5 --timeout 120 --bind hadoop4:8787 \"superset.app:create_app()\" --daemon \u505c\u6b62superset: ps -ef | awk '/superset/ && !/awk/{print $2}' | xargs kill -9 \u5b89\u88c5mysql\u6570\u636e\u6e90: conda install mysqlclient","title":"Superset\u57fa\u672c\u547d\u4ee4"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hadoop/","text":"hadoop # \u83b7\u53d6namenode\u7684\u6fc0\u6d3b\u72b6\u6001 hdfs haadmin -getServiceState nn1 # \u83b7\u53d6yarn\u7684Active\u548cStandby yar rmadmin -getServiceState rm1","title":"Hadoop"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hadoop/#hadoop","text":"# \u83b7\u53d6namenode\u7684\u6fc0\u6d3b\u72b6\u6001 hdfs haadmin -getServiceState nn1 # \u83b7\u53d6yarn\u7684Active\u548cStandby yar rmadmin -getServiceState rm1","title":"hadoop"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/","text":"HiveServer2\u542f\u52a8 nohup /app/hive/bin/hiveserver2 1>/app/hive/logs/hiveserver2.log 2>&1 & HiveServer2\u9519\u8bef\u7ea7\u522b\u542f\u52a8 nohup /app/hive/bin/hiveserver2 -hiveconf hive.root.logger=INFO,console 1>/app/hive/logs/hiveserver2.log 2>&1 & Hive metastore\u542f\u52a8 nohup /app/hive-metastore/bin/hive --service metastore 1>/app/hive-metastore/logs/metastore.log 2>&1 & Hive\u6743\u9650\u8bed\u6cd5 1.\u89d2\u8272 ## \u521b\u5efa\u89d2\u8272 create role role_name; ## \u663e\u793a\u89d2\u8272 show roles; ## \u5220\u9664\u89d2\u8272 drop role role_name; 2.\u7528\u6237 ## \u7528\u6237\u8fdb\u5165admin\u89d2\u8272\u6743\u9650 set hive.users.in.admin.role; set role admin; ## \u67e5\u770b\u67d0\u7528\u6237\u7684\u6240\u6709\u89d2\u8272 show role grant user user_name ## \u7ed9\u89d2\u8272\u6dfb\u52a0\u7528\u6237 grant role role_name to user user_name; 3.\u7528\u6237\u6388\u6743 ## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to useradmin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to user admin; 4.\u7ec4\u6388\u6743 ## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to group admin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to group admin; 5.\u89d2\u8272\u6388\u6743 ## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to role admin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to role admin; 6.\u7528\u6237\u79fb\u9664\u6743\u9650 ## \u57fa\u4e8e\u6570\u636e\u5e93 revoke select on database default from useruserB; ## \u57fa\u4e8e\u67d0\u5f20\u8868 revoke select on table ppdata from useruserB; 7.\u67e5\u770b\u89d2\u8272\u6743\u9650 ## \u5728\u67d0\u4e2a\u6570\u636e\u5e93\u7684\u6743\u9650 show grant role role_name on database database_name; ## \u5728\u67d0\u8868\u7684\u6743\u9650 show grant role role_name on [table] table_name; 8.\u6743\u9650\u8bf4\u660e \u540d\u79f0 \u63cf\u8ff0 ALL \u8d4b\u4e88\u6240\u6709\u7684\u6743\u9650 ALTER \u6709\u4fee\u6539\u8868\u7ed3\u6784\u7684\u6743\u9650 CREATE \u6709\u521b\u5efa\u8868\u7684\u6743\u9650 DROP \u6709\u5220\u9664\u8868\u6216\u8868\u4e2d\u7684\u5206\u533a\u7684\u6743\u9650 LOCK \u5f00\u542f\u5e76\u53d1\u540e\uff0c\u9501\u5b9a\u548c\u89e3\u9501\u5b9a\u8868\u7684\u6743\u9650 SELECT \u67e5\u8be2\u8868\u6216\u8005\u5206\u533a\u4e2d\u6570\u636e\u7684\u6743\u9650 SHOW_DATABASE \u67e5\u770b\u6240\u6709\u6570\u636e\u5e93\u7684\u6743\u9650 UPDATE \u5411\u8868\u6216\u8005\u5206\u533a\u4e2d\u63d2\u5165\u6216\u52a0\u8f7d\u6570\u636e\u7684\u6743\u9650","title":"Hive"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#hive","text":"","title":"Hive\u6743\u9650\u8bed\u6cd5"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#1","text":"## \u521b\u5efa\u89d2\u8272 create role role_name; ## \u663e\u793a\u89d2\u8272 show roles; ## \u5220\u9664\u89d2\u8272 drop role role_name;","title":"1.\u89d2\u8272"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#2","text":"## \u7528\u6237\u8fdb\u5165admin\u89d2\u8272\u6743\u9650 set hive.users.in.admin.role; set role admin; ## \u67e5\u770b\u67d0\u7528\u6237\u7684\u6240\u6709\u89d2\u8272 show role grant user user_name ## \u7ed9\u89d2\u8272\u6dfb\u52a0\u7528\u6237 grant role role_name to user user_name;","title":"2.\u7528\u6237"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#3","text":"## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to useradmin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to user admin;","title":"3.\u7528\u6237\u6388\u6743"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#4","text":"## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to group admin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to group admin;","title":"4.\u7ec4\u6388\u6743"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#5","text":"## \u57fa\u4e8e\u6570\u636e\u5e93 grant select on database default to role admin; ## \u57fa\u4e8e\u67d0\u5f20\u8868 grant select on table ppdata to role admin;","title":"5.\u89d2\u8272\u6388\u6743"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#6","text":"## \u57fa\u4e8e\u6570\u636e\u5e93 revoke select on database default from useruserB; ## \u57fa\u4e8e\u67d0\u5f20\u8868 revoke select on table ppdata from useruserB;","title":"6.\u7528\u6237\u79fb\u9664\u6743\u9650"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#7","text":"## \u5728\u67d0\u4e2a\u6570\u636e\u5e93\u7684\u6743\u9650 show grant role role_name on database database_name; ## \u5728\u67d0\u8868\u7684\u6743\u9650 show grant role role_name on [table] table_name;","title":"7.\u67e5\u770b\u89d2\u8272\u6743\u9650"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/hive/#8","text":"\u540d\u79f0 \u63cf\u8ff0 ALL \u8d4b\u4e88\u6240\u6709\u7684\u6743\u9650 ALTER \u6709\u4fee\u6539\u8868\u7ed3\u6784\u7684\u6743\u9650 CREATE \u6709\u521b\u5efa\u8868\u7684\u6743\u9650 DROP \u6709\u5220\u9664\u8868\u6216\u8868\u4e2d\u7684\u5206\u533a\u7684\u6743\u9650 LOCK \u5f00\u542f\u5e76\u53d1\u540e\uff0c\u9501\u5b9a\u548c\u89e3\u9501\u5b9a\u8868\u7684\u6743\u9650 SELECT \u67e5\u8be2\u8868\u6216\u8005\u5206\u533a\u4e2d\u6570\u636e\u7684\u6743\u9650 SHOW_DATABASE \u67e5\u770b\u6240\u6709\u6570\u636e\u5e93\u7684\u6743\u9650 UPDATE \u5411\u8868\u6216\u8005\u5206\u533a\u4e2d\u63d2\u5165\u6216\u52a0\u8f7d\u6570\u636e\u7684\u6743\u9650","title":"8.\u6743\u9650\u8bf4\u660e"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/pom%E6%96%87%E4%BB%B6/","text":"<!-- maven\u6253\u5305\u63d2\u4ef6 --> <plugin> <groupId>org.apache.maven.plugins</groupId> <artifactId>maven-compiler-plugin</artifactId> <version>3.5.1</version> <configuration> <source>8</source> <target>8</target> </configuration> </plugin> <!-- \u8f7b\u91cf\u7ea7DI\u5bb9\u5668Guice --> <dependency> <groupId>com.google.inject</groupId> <artifactId>guice</artifactId> <version>5.1.0</version> </dependency>","title":"pom\u6587\u4ef6"},{"location":"%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/%E7%8A%B6%E6%80%81%E7%A0%81/","text":"\u72b6\u6001\u7801\u519c \u8bf4\u660e \u8be6\u60c5 100 \u7ee7\u7eed \u8bf7\u6c42\u8005\u5e94\u5f53\u7ee7\u7eed\u63d0\u51fa\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u5df2\u7ecf\u6536\u5230\u8bf7\u6c42\u7684\u4e00\u90e8\u5206 101 \u5207\u6362\u534f\u8bae \u8bf7\u6c42\u8005\u5df2\u7ecf\u8981\u6c42\u670d\u52a1\u5668\u5207\u6362\u534f\u8bae\uff0c\u670d\u52a1\u5668\u5df2\u786e\u8ba4\u5e76\u4e14\u51c6\u5907\u5207\u6362 200 \u6210\u529f \u670d\u52a1\u5668\u5df2\u7ecf\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff08\u8fd9\u4e2a\u662f\u5927\u5bb6\u6700\u7231\u770b\u5230\u7684~~\uff09 201 \u5df2\u521b\u5efa \u8bf7\u6c42\u6210\u529f\u5e76\u4e14\u670d\u52a1\u5668\u521b\u5efa\u4e86\u65b0\u8d44\u6e90 202 \u5df2\u63a5\u53d7 \u670d\u52a1\u7136\u5df2\u63a5\u53d7\u8bf7\u6c42\uff0c\u4f46\u5c1a\u672a\u5904\u7406 203 \u975e\u6388\u6743\u4fe1\u606f \u670d\u52a1\u5668\u5df2\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u4f46\u8fd4\u56de\u7684\u4fe1\u606f\u53ef\u80fd\u6765\u81ea\u53e6\u4e00\u4e2a\u6e90 204 \u65e0\u5185\u5bb9 \u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c \u4f46\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u5185\u5bb9 205 \u91cd\u7f6e\u5185\u5bb9 \u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u8bf7\u6c42\uff0c\u5185\u5bb9\u88ab\u91cd\u5b9c 206 \u90e8\u5206\u5185\u5bb9 \u670d\u52a1\u5668\u6210\u529f\u5904\u7406\u4e86\u90e8\u5206\u8bf7\u6c42 300 \u591a\u79cd\u9009\u62e9 \u9488\u5bf9\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u53ef\u6267\u884c\u591a\u79cd\u64cd\u4f5c 301 \u6c38\u4e45\u79fb\u52a8 \u8bf7\u6c42\u7684\u7f51\u9875\u5df2\u6c38\u4e45\u79fb\u52a8\u5230\u65b0\u4f4d\u7f6e\uff0c\u5373\u6c38\u4e45\u91cd\u5b9a\u5411 302 l\u4e34\u65f6\u79fb\u52a8 \u8bf7\u6c42\u7684\u7f51\u9875\u6682\u65f6\u8df3\u8f6c\u5230\u5176\u4ed6\u9875\u9762\uff0c\u5373\u6682\u65f6\u91cd\u5b9a 303 \u67e5\u770b\u5176\u4ed6\u4f4d\u7f6e \u5982\u679c\u539f\u6765\u7684\u8bf7\u6c42\u662f POST\uff0c \u91cd\u5b9a\u5411\u76ee\u6807\u6587\u6863\u5e94\u8be5\u901a\u8fc7 GET \u63d0\u53d6 304 \u672a\u4fee\u6539 \u6b64\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684\u7f51\u9875\u672a\u4fee\u6539\uff0c \u7ee7\u7eed\u4f7f\u7528\u4e0a\u6b21\u7684\u8d44\u6e90 305 \u4f7f\u7528\u4ee3\u7406 \u8bf7\u6c42\u8005\u5e94\u8be5\u4f7f\u7528\u4ee3\u7406\u8bbf\u95ee\u8be5\u7f51\u9875 307 \u4e34\u65f6\u91cd\u5b9a\u5411 \u8bf7\u6c42\u7684\u8d44\u6e90\u4e34\u65f6\u4ece\u5176\u4ed6\u4f4d\u7f6el\u54cd\u5e94 400 \u9519\u8bef\u8c19\u6c42 \u670d\u52a1\u5668\u65e0\u6cd5\u89e3\u6790\u8be5\u8bf7\u6c42 401 \u672a\u6388\u6743 \u8bf7\u6c42\u6ca1\u6709\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u6216\u9a8c\u8bc1\u672a\u901a\u8fc7 403 \u7981\u6b62\u8bbf\u95ee \u670d\u52a1\u5c06\u62d2\u7edd\u6b64\u8bf7\u6c42 404 \u672a\u627e\u5230 \u670d\u52a1\u5668\u627e\u4e0d\u5230\u8bf7\u6c42\u7684\u7f51\u9875 405 \u65b9\u6cd5\u7981\u7528 \u670d\u52a1\u5668\u7981\u7528\u4e86\u8bf7\u6c42\u4e2d\u6307\u5b9a\u7684\u65b9\u6cd5 406 \u4e0d\u63a5\u53d7 \u65e0\u6cd5\u4f7f\u7528\u8bf7\u6c42\u7684\u5185\u5bb9\u54cd\u5e94\u8bf7\u6c42\u7684\u7f51\u9875 407 \u9700\u8981\u4ee3\u7406\u641c\u6743 \u8bf7\u6c42\u8005\u9700\u8981\u4f7f\u7528\u4ee3\u7406\u6388\u6743 408 \u8bf7\u6c42\u8d85\u65f6 \u670d\u52a1\u5668\u8bf7\u6c42\u8d85\u65f6 409 \u51b2\u7a81 \u670d\u52a1\u5668\u5728\u5b8c\u6210\u8bf7\u6c42\u65f6\u53d1\u751f\u51b2\u7a81 410 \u5df2\u5220\u9664 \u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u6c38\u4e45\u5220\u9664 411 \u9700\u8981\u6709\u6548\u957f\u5ea6 \u670d\u52a1\u5668\u4e0d\u63a5\u53d7\u4e0d\u542b\u6709\u6548\u5185\u5bb9\u957f\u5ea6\u6807\u5934\u5b57\u6bb5\u7684\u8bf7\u6c42 412 \u672a\u6ee1\u8db3\u524d\u63d0\u6761\u4ef6 \u670d\u52a1\u5668\u672a\u6ee1\u8db3\u8bf7\u6c42\u8005\u5728\u8bf7\u6c42\u4e2d\u8bbe\u7f6e\u7684\u5176\u4e2d\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6 413 \u8bf7\u6c42\u5b9e\u4f53\u8fc7\u5927 \u8bf7\u6c42\u5b9e\u4f53\u8fc7\u5927\uff0c\u8d85\u51fa\u670d\u52a1\u5668\u7684\u5904\u7406\u80fd\u529b 414 \u8bf7\u6c42 URI\u8fc7\u957f \u8bf7\u6c42\u7f51\u5740\u8fc7\u957f\uff0c\u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406 415 \u4e0d\u652f\u6301\u7c7b\u578b \u8bf7\u6c42\u683c\u5f0f\u4e0d\u88ab\u8bf7\u6c42\u9875\u9762\u652f\u6301 416 \u8bf7\u6c42\u8303\u56f4\u4e0d\u7b26 \u9875\u800c\u65e0\u6cd5\u63d0\u4f9b\u8bf7\u6c42\u7684\u8303\u56f4 417 \u672f\u6ee1\u8db3\u671f\u671b\u503c \u670d\u52a1\u5668\u672a\u6ee1\u8db3\u671f\u671b\u8bf7\u6c42\u6807\u5934\u5b57\u6bb5\u7684\u8981\u6c42 500 \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef \u670d\u52a1\u5668\u9047\u5230\u9519\u8bef\uff0c\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42 501 \u672a\u5b9e\u73b0 \u670d\u52a1\u5668\u4e0d\u5177\u5907\u5b8c\u6210\u8bf7\u6c42\u7684\u529f\u80fd 502 \u9519\u8bef\u7f51\u5173 \u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c \u4ece\u4e0a\u6e38\u670d\u52a1\u7136\u6536\u5230\u65e0\u6548\u54cd\u5e94 503 \u670d\u52a1\u4e0d\u53ef\u7528 \u670d\u52a1\u5668\u76ee\u524d\u65e0\u6cd5\u4f7f\u7528 504 \u7f51\u5173\u8d85\u65f6 \u670d\u52a1\u5668\u4f5c\u4e3a\u7f51\u5173\u6216\u4ee3\u7406\uff0c\u4f46\u662f\u6ca1\u6709\u53ca\u65f6\u4ece\u4e0a\u6e38\u670d\u52a1~~\u6536\u5230\u8bf7\u6c42 505 HTTP \u7248\u672c\u4e0d\u652f\u6301 \u670d\u52a1\u5668\u4e0d\u652f\u6301\u8bf7\u6c42\u4e2d\u6240\u7528\u7684 HTTP \u534f\u8bae","title":"\u72b6\u6001\u7801"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/hive%E9%97%AE%E9%A2%98/","text":"Hive\u6743\u9650\u4fee\u6539 hiveserver2\u7aef\u53e3\u542f\u52a8\u4e0d\u6210\u529f \u62a5\u9519\uff1a 2021-06-29T16:59:35,856 DEBUG [pool-7-thread-1] ipc.ProtobufRpcEngine: Call: mkdirs took 4ms 2021-06-29T16:59:35,856 INFO [pool-7-thread-1] session.SessionState: Created HDFS directory: /tmp/hive/hive/9b2f06f4-3ed2-4f0d-8f73-c81ec7970bb8/_tmp_space.db 2021-06-29T16:59:35,859 INFO [main] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:35,859 INFO [main] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:35,861 INFO [main] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:35,861 INFO [main] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient proxy=class org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient ugi=hive (auth:SIMPLE) retrie s=1 delay=1 lifetime=02021-06-29T16:59:35,888 WARN [main] metastore.RetryingMetaStoreClient: MetaStoreClient lost connection. Attempting to reconnect (1 of 1) after 1s. getCurrentNotificationEventId org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.thrift.TApplicationException.read(TApplicationException.java:111) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.recv_get_current_notificationEventId(ThriftHiveMetastore.java:5575) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_current_notificationEventId(ThriftHiveMetastore.java:5563) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getCurrentNotificationEventId(HiveMetaStoreClient.java:2723) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:73) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.startHiveServer2(HiveServer2.java:1036) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.access$1600(HiveServer2.java:140) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2$StartOptionExecutor.execute(HiveServer2.java:1305) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.main(HiveServer2.java:1149) ~[hive-service-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.util.RunJar.run(RunJar.java:239) ~[hadoop-common-3.0.0.jar:?] at org.apache.hadoop.util.RunJar.main(RunJar.java:153) ~[hadoop-common-3.0.0.jar:?] 2021-06-29T16:59:36,888 INFO [main] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient trying reconnect as hive (auth:SIMPLE) 2021-06-29T16:59:36,889 DEBUG [main] security.UserGroupInformation: PrivilegedAction as:hive (auth:SIMPLE) from:org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient .java:183)2021-06-29T16:59:36,890 INFO [main] metastore.HiveMetaStoreClient: Closed a connection to metastore, current connections: 0 2021-06-29T16:59:36,891 INFO [main] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:36,891 INFO [main] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:36,893 INFO [main] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:36,896 INFO [main] server.HiveServer2: Shutting down HiveServer2 2021-06-29T16:59:36,896 DEBUG [main] metadata.Hive: Closing current thread's connection to Hive Metastore. 2021-06-29T16:59:36,970 INFO [main] server.HiveServer2: Stopping/Disconnecting tez sessions. 2021-06-29T16:59:36,969 INFO [main] metastore.HiveMetaStoreClient: Closed a connection to metastore, current connections: 0 2021-06-29T16:59:36,970 WARN [main] server.HiveServer2: Error starting HiveServer2 on attempt 1, will retry in 60000ms java.lang.RuntimeException: Error initializing notification event poll at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:275) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.startHiveServer2(HiveServer2.java:1036) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.access$1600(HiveServer2.java:140) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2$StartOptionExecutor.execute(HiveServer2.java:1305) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.main(HiveServer2.java:1149) [hive-service-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.util.RunJar.run(RunJar.java:239) [hadoop-common-3.0.0.jar:?] at org.apache.hadoop.util.RunJar.main(RunJar.java:153) [hadoop-common-3.0.0.jar:?] Caused by: java.io.IOException: org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:75) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] ... 10 more Caused by: org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.thrift.TApplicationException.read(TApplicationException.java:111) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.recv_get_current_notificationEventId(ThriftHiveMetastore.java:5575) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_current_notificationEventId(ThriftHiveMetastore.java:5563) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getCurrentNotificationEventId(HiveMetaStoreClient.java:2723) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:73) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] ... 10 more 2021-06-29T16:59:36,974 ERROR [pool-7-thread-1] utils.MetaStoreUtils: Got exception: org.apache.thrift.transport.TTransportException Cannot write to null outputStream org.apache.thrift.transport.TTransportException: Cannot write to null outputStream at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:178) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:106) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:70) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.send_get_tables_by_type(ThriftHiveMetastore.java:1913) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_tables_by_type(ThriftHiveMetastore.java:1903) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1676) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1665) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:36,974 ERROR [pool-7-thread-1] utils.MetaStoreUtils: Converting exception to MetaException 2021-06-29T16:59:36,976 WARN [pool-7-thread-1] metastore.RetryingMetaStoreClient: MetaStoreClient lost connection. Attempting to reconnect (1 of 1) after 1s. getTables org.apache.hadoop.hive.metastore.api.MetaException: Got exception: org.apache.thrift.transport.TTransportException Cannot write to null outputStream at org.apache.hadoop.hive.metastore.utils.MetaStoreUtils.logAndThrowMetaException(MetaStoreUtils.java:168) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1667) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:37,976 INFO [pool-7-thread-1] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient trying reconnect as hive (auth:SIMPLE) 2021-06-29T16:59:37,977 DEBUG [pool-7-thread-1] security.UserGroupInformation: PrivilegedAction as:hive (auth:SIMPLE) from:org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMeta StoreClient.java:183)2021-06-29T16:59:37,977 DEBUG [pool-7-thread-1] metastore.HiveMetaStoreClient: Unable to shutdown metastore client. Will try closing transport directly. org.apache.thrift.transport.TTransportException: Cannot write to null outputStream at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:178) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:106) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:70) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBaseOneway(TServiceClient.java:66) ~[hive-exec-3.1.2.jar:3.1.2] at com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:436) ~[libfb303-0.9.3.jar:?] at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:430) ~[libfb303-0.9.3.jar:?] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:591) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.reconnect(HiveMetaStoreClient.java:366) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient$1.run(RetryingMetaStoreClient.java:187) ~[hive-exec-3.1.2.jar:3.1.2] at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_291] at javax.security.auth.Subject.doAs(Subject.java:422) ~[?:1.8.0_291] at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1962) ~[hadoop-common-3.0.0.jar:?] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:183) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:37,977 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:37,978 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:37,980 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:38,026 INFO [pool-7-thread-1] metadata.HiveMaterializedViewsRegistry: Materialized views registry has been initialized 2021-06-29T16:59:45,853 DEBUG [IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive] ipc.Client: IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive: closed 2021-06-29T16:59:45,853 DEBUG [IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive] ipc.Client: IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive: stopped, r emaining connections 0 \u89e3\u51b3\u65b9\u5f0f\uff1a <!-- \u5143\u6570\u636e\u5b58\u50a8\u6388\u6743 --> <property> <name>hive.metastore.event.db.notification.api.auth</name> <value>false</value> </property> hiveserver2\u8fde\u63a5\u62a5\u9519\uff1a\u201cUser: xxx is not allowed to impersonate yyy (state=08S01,code=0)\u201d \u89e3\u51b3\u65b9\u6cd5\uff1a \u5728 hadoop \u7684\u914d\u7f6e\u6587\u4ef6core-site.xml\u4e2d\u6dfb\u52a0\u6216\u8005\u4fee\u6539\u5982\u4e0b\u914d\u7f6e\u4fe1\u606f\uff0c\u518d\u91cd\u542fhadoop\u3002 <property> <name>hadoop.proxyuser.xxx.hosts</name> <value>*</value> </property> <property> <name>hadoop.proxyuser.xxx.groups</name> <value>*</value> </property>","title":"Hive\u95ee\u9898"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/hive%E9%97%AE%E9%A2%98/#hive","text":"hiveserver2\u7aef\u53e3\u542f\u52a8\u4e0d\u6210\u529f \u62a5\u9519\uff1a 2021-06-29T16:59:35,856 DEBUG [pool-7-thread-1] ipc.ProtobufRpcEngine: Call: mkdirs took 4ms 2021-06-29T16:59:35,856 INFO [pool-7-thread-1] session.SessionState: Created HDFS directory: /tmp/hive/hive/9b2f06f4-3ed2-4f0d-8f73-c81ec7970bb8/_tmp_space.db 2021-06-29T16:59:35,859 INFO [main] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:35,859 INFO [main] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:35,861 INFO [main] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:35,861 INFO [main] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient proxy=class org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient ugi=hive (auth:SIMPLE) retrie s=1 delay=1 lifetime=02021-06-29T16:59:35,888 WARN [main] metastore.RetryingMetaStoreClient: MetaStoreClient lost connection. Attempting to reconnect (1 of 1) after 1s. getCurrentNotificationEventId org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.thrift.TApplicationException.read(TApplicationException.java:111) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.recv_get_current_notificationEventId(ThriftHiveMetastore.java:5575) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_current_notificationEventId(ThriftHiveMetastore.java:5563) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getCurrentNotificationEventId(HiveMetaStoreClient.java:2723) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:73) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.startHiveServer2(HiveServer2.java:1036) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.access$1600(HiveServer2.java:140) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2$StartOptionExecutor.execute(HiveServer2.java:1305) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.main(HiveServer2.java:1149) ~[hive-service-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.util.RunJar.run(RunJar.java:239) ~[hadoop-common-3.0.0.jar:?] at org.apache.hadoop.util.RunJar.main(RunJar.java:153) ~[hadoop-common-3.0.0.jar:?] 2021-06-29T16:59:36,888 INFO [main] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient trying reconnect as hive (auth:SIMPLE) 2021-06-29T16:59:36,889 DEBUG [main] security.UserGroupInformation: PrivilegedAction as:hive (auth:SIMPLE) from:org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient .java:183)2021-06-29T16:59:36,890 INFO [main] metastore.HiveMetaStoreClient: Closed a connection to metastore, current connections: 0 2021-06-29T16:59:36,891 INFO [main] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:36,891 INFO [main] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:36,893 INFO [main] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:36,896 INFO [main] server.HiveServer2: Shutting down HiveServer2 2021-06-29T16:59:36,896 DEBUG [main] metadata.Hive: Closing current thread's connection to Hive Metastore. 2021-06-29T16:59:36,970 INFO [main] server.HiveServer2: Stopping/Disconnecting tez sessions. 2021-06-29T16:59:36,969 INFO [main] metastore.HiveMetaStoreClient: Closed a connection to metastore, current connections: 0 2021-06-29T16:59:36,970 WARN [main] server.HiveServer2: Error starting HiveServer2 on attempt 1, will retry in 60000ms java.lang.RuntimeException: Error initializing notification event poll at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:275) ~[hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.startHiveServer2(HiveServer2.java:1036) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.access$1600(HiveServer2.java:140) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2$StartOptionExecutor.execute(HiveServer2.java:1305) [hive-service-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.main(HiveServer2.java:1149) [hive-service-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.util.RunJar.run(RunJar.java:239) [hadoop-common-3.0.0.jar:?] at org.apache.hadoop.util.RunJar.main(RunJar.java:153) [hadoop-common-3.0.0.jar:?] Caused by: java.io.IOException: org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:75) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] ... 10 more Caused by: org.apache.thrift.TApplicationException: Internal error processing get_current_notificationEventId at org.apache.thrift.TApplicationException.read(TApplicationException.java:111) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.recv_get_current_notificationEventId(ThriftHiveMetastore.java:5575) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_current_notificationEventId(ThriftHiveMetastore.java:5563) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getCurrentNotificationEventId(HiveMetaStoreClient.java:2723) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getCurrentNotificationEventId(Unknown Source) ~[?:?] at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getCurrentNotificationEventId(EventUtils.java:73) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.<init>(NotificationEventPoll.java:103) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.events.NotificationEventPoll.initialize(NotificationEventPoll.java:59) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hive.service.server.HiveServer2.init(HiveServer2.java:273) ~[hive-service-3.1.2.jar:3.1.2] ... 10 more 2021-06-29T16:59:36,974 ERROR [pool-7-thread-1] utils.MetaStoreUtils: Got exception: org.apache.thrift.transport.TTransportException Cannot write to null outputStream org.apache.thrift.transport.TTransportException: Cannot write to null outputStream at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:178) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:106) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:70) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.send_get_tables_by_type(ThriftHiveMetastore.java:1913) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_tables_by_type(ThriftHiveMetastore.java:1903) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1676) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1665) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:36,974 ERROR [pool-7-thread-1] utils.MetaStoreUtils: Converting exception to MetaException 2021-06-29T16:59:36,976 WARN [pool-7-thread-1] metastore.RetryingMetaStoreClient: MetaStoreClient lost connection. Attempting to reconnect (1 of 1) after 1s. getTables org.apache.hadoop.hive.metastore.api.MetaException: Got exception: org.apache.thrift.transport.TTransportException Cannot write to null outputStream at org.apache.hadoop.hive.metastore.utils.MetaStoreUtils.logAndThrowMetaException(MetaStoreUtils.java:168) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:1667) ~[hive-exec-3.1.2.jar:3.1.2] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:37,976 INFO [pool-7-thread-1] metastore.RetryingMetaStoreClient: RetryingMetaStoreClient trying reconnect as hive (auth:SIMPLE) 2021-06-29T16:59:37,977 DEBUG [pool-7-thread-1] security.UserGroupInformation: PrivilegedAction as:hive (auth:SIMPLE) from:org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMeta StoreClient.java:183)2021-06-29T16:59:37,977 DEBUG [pool-7-thread-1] metastore.HiveMetaStoreClient: Unable to shutdown metastore client. Will try closing transport directly. org.apache.thrift.transport.TTransportException: Cannot write to null outputStream at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:178) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:106) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:70) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.thrift.TServiceClient.sendBaseOneway(TServiceClient.java:66) ~[hive-exec-3.1.2.jar:3.1.2] at com.facebook.fb303.FacebookService$Client.send_shutdown(FacebookService.java:436) ~[libfb303-0.9.3.jar:?] at com.facebook.fb303.FacebookService$Client.shutdown(FacebookService.java:430) ~[libfb303-0.9.3.jar:?] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.close(HiveMetaStoreClient.java:591) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.reconnect(HiveMetaStoreClient.java:366) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient$1.run(RetryingMetaStoreClient.java:187) ~[hive-exec-3.1.2.jar:3.1.2] at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_291] at javax.security.auth.Subject.doAs(Subject.java:422) ~[?:1.8.0_291] at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1962) ~[hadoop-common-3.0.0.jar:?] at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:183) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_291] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_291] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_291] at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_291] at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.2.jar:3.1.2] at com.sun.proxy.$Proxy36.getTables(Unknown Source) ~[?:?] at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByType(Hive.java:1310) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getTableObjects(Hive.java:1222) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.Hive.getAllMaterializedViewObjects(Hive.java:1217) ~[hive-exec-3.1.2.jar:3.1.2] at org.apache.hadoop.hive.ql.metadata.HiveMaterializedViewsRegistry$Loader.run(HiveMaterializedViewsRegistry.java:166) ~[hive-exec-3.1.2.jar:3.1.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_291] at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_291] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_291] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_291] 2021-06-29T16:59:37,977 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Trying to connect to metastore with URI thrift://cdh1:9083 2021-06-29T16:59:37,978 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Opened a connection to metastore, current connections: 1 2021-06-29T16:59:37,980 INFO [pool-7-thread-1] metastore.HiveMetaStoreClient: Connected to metastore. 2021-06-29T16:59:38,026 INFO [pool-7-thread-1] metadata.HiveMaterializedViewsRegistry: Materialized views registry has been initialized 2021-06-29T16:59:45,853 DEBUG [IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive] ipc.Client: IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive: closed 2021-06-29T16:59:45,853 DEBUG [IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive] ipc.Client: IPC Client (369333979) connection to cdh1/192.168.30.191:8020 from hive: stopped, r emaining connections 0 \u89e3\u51b3\u65b9\u5f0f\uff1a <!-- \u5143\u6570\u636e\u5b58\u50a8\u6388\u6743 --> <property> <name>hive.metastore.event.db.notification.api.auth</name> <value>false</value> </property>","title":"Hive\u6743\u9650\u4fee\u6539"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/hive%E9%97%AE%E9%A2%98/#hiveserver2user-xxx-is-not-allowed-to-impersonate-yyy-state08s01code0","text":"\u89e3\u51b3\u65b9\u6cd5\uff1a \u5728 hadoop \u7684\u914d\u7f6e\u6587\u4ef6core-site.xml\u4e2d\u6dfb\u52a0\u6216\u8005\u4fee\u6539\u5982\u4e0b\u914d\u7f6e\u4fe1\u606f\uff0c\u518d\u91cd\u542fhadoop\u3002 <property> <name>hadoop.proxyuser.xxx.hosts</name> <value>*</value> </property> <property> <name>hadoop.proxyuser.xxx.groups</name> <value>*</value> </property>","title":"hiveserver2\u8fde\u63a5\u62a5\u9519\uff1a\u201cUser: xxx is not allowed to impersonate yyy (state=08S01,code=0)\u201d"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AEbug/","text":"Hive\u95ee\u9898 Hive \u67e5\u8be2\u95ee\u9898 hive\u6267\u884cselect\u8bed\u53e5\uff0c\u5b57\u6bb5\u4e3anull\uff0c\u6267\u884ccount(*) group by\u8bed\u53e5\uff0c\u5b57\u6bb5\u4f1a\u6709\u6570\u636e(\u672a\u627e\u51fa\u539f\u56e0) Hive\u66f4\u6362\u5f15\u64ce\u95ee\u9898 hive\u66f4\u6362spark\u5f15\u64ce\uff0c\u7248\u672c\u4e0d\u517c\u5bb9\u95ee\u9898 Supserset\u95ee\u9898 supserset\u914d\u7f6eTi db\u6570\u636e\u6e90\u95ee\u9898\uff0c\u5f53\u6709\u6ce8\u91ca\u65f6\uff0c\u4e0d\u80fd\u6dfb\u52a0\u6570\u636e\u6e90 \u5f02\u5e38\u5173\u952e\u5b57\uff1a \"\u540d\" , \"\u8bcd\" , \"\u8981\" , \"\u5f0f\", \"\u6765\" ,\u53d1\" ,\"\u79cd\" ,\"\u7801\" ,\"\u6d89\" ,\"\u636e\" ,\"\u606f\" ,\"\u9881\" \"\u5355\" , \"\u53f7\" , \"\u3001\" , \"\u53d6\", \"\"","title":"\u9879\u76eebug"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AEbug/#hive","text":"","title":"Hive\u95ee\u9898"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AEbug/#hive_1","text":"hive\u6267\u884cselect\u8bed\u53e5\uff0c\u5b57\u6bb5\u4e3anull\uff0c\u6267\u884ccount(*) group by\u8bed\u53e5\uff0c\u5b57\u6bb5\u4f1a\u6709\u6570\u636e(\u672a\u627e\u51fa\u539f\u56e0)","title":"Hive \u67e5\u8be2\u95ee\u9898"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AEbug/#hive_2","text":"hive\u66f4\u6362spark\u5f15\u64ce\uff0c\u7248\u672c\u4e0d\u517c\u5bb9\u95ee\u9898","title":"Hive\u66f4\u6362\u5f15\u64ce\u95ee\u9898"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AEbug/#supserset","text":"supserset\u914d\u7f6eTi db\u6570\u636e\u6e90\u95ee\u9898\uff0c\u5f53\u6709\u6ce8\u91ca\u65f6\uff0c\u4e0d\u80fd\u6dfb\u52a0\u6570\u636e\u6e90 \u5f02\u5e38\u5173\u952e\u5b57\uff1a \"\u540d\" , \"\u8bcd\" , \"\u8981\" , \"\u5f0f\", \"\u6765\" ,\u53d1\" ,\"\u79cd\" ,\"\u7801\" ,\"\u6d89\" ,\"\u636e\" ,\"\u606f\" ,\"\u9881\" \"\u5355\" , \"\u53f7\" , \"\u3001\" , \"\u53d6\", \"\"","title":"Supserset\u95ee\u9898"},{"location":"%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E9%A1%B9%E7%9B%AE%E8%AE%B0%E5%BD%95/","text":"data-dandle rabbitMQ\u6574\u4f53\u53d1\u9001\u6307\u4ee4: Postman: curl --location --request GET 'devbackend.datasource.cn/test/publishDeliverAsk' \\--header 'token: ea20bb6e904a439db1346fc86863dce3' \u777f\u5bfb: http://devadmin.datasource.cn/#/login?redirect=%2Fhome \u777f\u5bfb\u8d26\u53f7: zhangshancheng 123qwe!@# \u777f\u5bfb\u6620\u5c04ip: 172.16.8.42 devadmin.datasource.cn devbackend.datasource.cn","title":"\u9879\u76ee\u8bb0\u5f55"}]}